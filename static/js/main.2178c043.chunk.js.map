{"version":3,"sources":["images/coconuts.png","images/monkey_3.png","images/two_ships.png","images/board_0.png","tiles.js","modal.js","rules.js","index.js"],"names":["module","exports","TileRoute","tileHead","tileTail","coconuts","chests","redShips","blueShips","redAnchors","blueAnchors","this","Tile","id","routes","BoardRoute","boardHead","boardTail","tileRoutes","tileRoute","value","numRed","numBlue","red","blue","calcScore","tiles","modalRoot","document","getElementById","Modal","props","element","createElement","appendChild","removeChild","createPortal","children","React","Component","rules","className","src","require","alt","PreviousButton","currentRule","onClick","handlePrevious","disabled","NextButton","length","handleNext","Tutorial","useState","setCurrentRule","handleHide","shuffleArray","array","index","swapIndex","Math","floor","random","swapValue","getBoardNodesFromRowCol","row","column","numColumns","topLeft","bottomLeft","tallyScore","newRedScore","newBlueScore","score","Game","initialPool","startingOffer","startingBoard","startingRoutes","startingScore","startingDrawEffect","newGameRequested","setNewGameRequested","offer","setOffer","pool","setPool","played","setPlayed","setRoutes","showRules","setShowRules","setScore","drawEffect","setDrawEffect","useEffect","getElementsByTagName","style","setProperty","join","numRows","slice","splice","initialTiles","starting_column","round","console","log","startingPositions","Array","from","e","fill","forEach","tile","startingPosition","boardNodes","route","head","tail","boardRoute","push","getInitialSetup","handleDrop","dropData","dragData","squares","newRoutes","boardRoutes","convertedTileHead","convertedTileTail","headMatch","tailMatch","matchingRoute","newValue","matchingValue","newHead","newTail","concat","indexToDelete","indexOf","newRoute","updateRoutes","newScore","newTile","newPool","pop","drawTile","offerIndex","newOffer","Square","onDragOver","onDrop","Board","renderTile","targetKey","key","rows","rowIndex","columnIndex","createBoard","Offer","renderOfferTile","createOffer","tutorial","max","ReactDOM","render"],"mappings":"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","file":"static/js/main.2178c043.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/coconuts.1ae6fa30.png\";","module.exports = __webpack_public_path__ + \"static/media/monkey_3.481f421f.png\";","module.exports = __webpack_public_path__ + \"static/media/two_ships.846e2372.png\";","module.exports = __webpack_public_path__ + \"static/media/board_0.f1c66207.png\";","export class TileRoute {\n    constructor({\n                    tileHead=null,\n                    tileTail=null,\n                    coconuts=0,\n                    chests=0,\n                    redShips=0,\n                    blueShips=0,\n                    redAnchors=0,\n                    blueAnchors=0\n                }) {\n        // head and tail will be coordinates (0,0) to (1,1) which will be converted to an int referring to board\n        // placement once placed.\n        // Head or tail may be null if the route terminates.\n        this.tileHead = tileHead;\n        this.tileTail = tileTail;\n\n        // The number of each type of feature on the route\n        this.coconuts = coconuts;\n        this.chests = chests;\n        this.redShips = redShips;\n        this.blueShips = blueShips;\n        this.redAnchors = redAnchors;\n        this.blueAnchors = blueAnchors;\n    }\n}\n\nexport class Tile {\n    constructor({id, routes}) {\n        this.id = id;\n        this.routes = routes;\n    }\n}\n\nexport class BoardRoute {\n    constructor({\n                    boardHead=null,\n                    boardTail=null,\n                    tileRoutes=[],\n                }) {\n        // head and tail are ints corresponding to location on the board.\n        // Head and/or tail may be null if the route terminates.\n        this.boardHead = boardHead;\n        this.boardTail = boardTail;\n\n        this.tileRoutes = tileRoutes;\n    }\n\n    // Getter\n    get score() {\n        return this.calcScore();\n    }\n    // Method\n    calcScore() {\n        // Count the features across all tile routes in this route\n        let coconuts = 0;\n        let chests = 0;\n        let redShips = 0;\n        let blueShips = 0;\n        let redAnchors = 0;\n        let blueAnchors = 0;\n        for (let tileRoute of this.tileRoutes) {\n            coconuts += tileRoute.coconuts;\n            chests += tileRoute.chests;\n            redShips += tileRoute.redShips;\n            blueShips += tileRoute.blueShips;\n            redAnchors += tileRoute.redAnchors;\n            blueAnchors += tileRoute.blueAnchors;\n        }\n\n        let value = chests ? coconuts * 2 : coconuts;\n        let numRed = redAnchors ? redShips * 2 : redShips;\n        let numBlue = blueAnchors ? blueShips * 2 : blueShips;\n        if (numBlue > numRed) {\n            return {red: 0, blue: value};\n        } else if (numRed > numBlue) {\n            return {red: value, blue: 0};\n        } else {\n            return {red: 0, blue: 0};\n        }\n    }\n}\n\nexport const tiles = [\n    new Tile({\n        id: 1,\n        routes: [\n            new TileRoute({\n                tileHead: 0,\n                tileTail: 2,\n                coconuts: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: 3,\n                coconuts: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:2,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: null,\n                blueShips: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: 2,\n                coconuts: 1,\n                redShips: 1,\n            }),\n            new TileRoute({\n                tileHead: 3,\n                tileTail: null,\n                blueAnchors: 1\n            }),\n        ]\n    }),\n    new Tile({\n        id:3,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: 1,\n                chests: 1,\n            }),\n            new TileRoute({\n                tileHead: 2,\n                tileTail: 3,\n                blueShips: 2,\n            }),\n        ]\n    }),\n    new Tile({\n        id:4,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: null,\n                coconuts: 1\n            }),\n            new TileRoute({\n                tileHead: 2,\n                tileTail: null,\n                blueAnchors: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: 3,\n                redShips: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:5,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: null,\n                coconuts: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: 2,\n                redShips: 1,\n            }),\n            new TileRoute({\n                tileHead: 3,\n                tileTail: null,\n                coconuts: 2,\n            }),\n        ]\n    }),\n    new Tile({\n        id:6,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: 1,\n                coconuts: 2,\n            }),\n            new TileRoute({\n                tileHead: null,\n                tileTail: 2,\n                redShips: 1,\n            }),\n            new TileRoute({\n                tileHead: 3,\n                tileTail: null,\n                blueShips: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:7,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: 2,\n                redShips: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: null,\n                coconuts: 1,\n            }),\n            new TileRoute({\n                tileHead: 3,\n                tileTail: null,\n                redShips: 1\n            }),\n        ]\n    }),\n    new Tile({\n        id:8,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: 3,\n                blueShips: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: 2,\n                redShips: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:9,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: 3,\n                blueShips: 1,\n                coconuts: 1,\n            }),\n            new TileRoute({\n                tileHead: null,\n                tileTail: 2,\n                redAnchors: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: null,\n                redShips: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:10,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: null,\n                redShips: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: null,\n                redAnchors: 1,\n            }),\n            new TileRoute({\n                tileHead: 2,\n                tileTail: 3,\n                coconuts: 1,\n                chests: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:11,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                blueAnchors: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                blueShips: 1,\n            }),\n            new TileRoute({\n                tileHead: 2,\n                tileTail: 3,\n                redShips: 1,\n                coconuts: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:12,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: 3,\n                redShips: 2,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                blueAnchors: 1,\n            }),\n            new TileRoute({\n                tileHead: 2,\n                coconuts: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:13,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: 3,\n                redShips: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: 2,\n                coconuts: 2,\n            }),\n        ]\n    }),\n    new Tile({\n        id:14,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: 2,\n                blueShips: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                coconuts: 1,\n            }),\n            new TileRoute({\n                tileHead: 3,\n                redAnchors: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:15,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: 1,\n                coconuts: 2,\n            }),\n            new TileRoute({\n                tileHead: 2,\n                tileTail: 3,\n                chests: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:16,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                coconuts: 2,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: 2,\n                blueShips: 1,\n            }),\n            new TileRoute({\n                tileHead: 3,\n                coconuts: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:17,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                coconuts: 1,\n            }),\n            new TileRoute({\n                tileHead: 2,\n                blueShips: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: 3,\n                blueShips: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:18,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                tileTail: 3,\n                coconuts: 2,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: 2,\n                blueShips: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id:19,\n        routes:[\n            new TileRoute({\n                tileHead: 0,\n                redAnchors: 1,\n            }),\n            new TileRoute({\n                tileHead: 1,\n                tileTail: 2,\n                blueShips: 2,\n            }),\n            new TileRoute({\n                tileHead: 3,\n                coconuts: 1,\n            }),\n        ]\n    }),\n    new Tile({\n        id: 20,\n        routes: [\n            new TileRoute({\n                tileHead: 0,\n                tileTail: 1,\n                chests: 1,\n            }),\n            new TileRoute({\n                tileHead: 2,\n                tileTail: 3,\n                redShips: 2,\n            }),\n        ]\n    }),\n];","import React from 'react';\nimport { createPortal } from 'react-dom';\n\n// Get the element with the id 'modal' from index.html\nconst modalRoot = document.getElementById( 'modal' );\n\nclass Modal extends React.Component {\n    constructor(props) {\n        super(props);\n        // Create a div to render the modal into\n        this.element = document.createElement('div');\n    }\n\n    componentDidMount() {\n        // Append the element into the DOM on mount\n        modalRoot.appendChild(this.element);\n    }\n\n    componentWillUnmount() {\n        // Remove the element from the DOM when on unmount\n        modalRoot.removeChild(this.element);\n    }\n\n    render() {\n        // Use a portal to render the children into the element\n        // (Takes any valid React child (JSX, strings, arrays, etc.) and an element in the DOM\n        return createPortal(\n            this.props.children,\n            this.element,\n        );\n    }\n}\n\nexport default Modal;\n","import React, {useState} from \"react\";\nimport Modal from \"./modal\";\n\nconst rules = [\n\n    <div className=\"tutorial-step\">\n        <div className=\"tutorial-text\">\n            <h1>Monkeys of the Caribbean</h1>\n            <br/>\n            <br/>\n            2 Players\n            <br/>\n            15 Minutes\n            <br/>\n            <br/>\n            Game by Colin Thom\n            <br/>\n            Built by Sarah Edwards\n        </div>\n        <img src={require('./images/monkey_3.png')} alt=\"monkey pirate\" className=\"icon\"/>\n    </div>,\n\n    <div className=\"tutorial-step\">\n        <div className=\"tutorial-text\">\n            A crew of monkeys&mdash;with you as the captain&mdash;overthrew their pirate overlords.\n            But it is not gold you want. Nay, coconuts are the bounty you seek.\n            Alas! There be limited space on the sea. Compete for control of sea routes to get the most coconuts.\n        </div>\n        <img src={require('./images/coconuts.png')} alt=\"coconuts\" className=\"icon\"/>\n    </div>,\n\n\n    <div className=\"tutorial-step\">\n        <div className=\"tutorial-text\">\n            Two competing monkey pirate fleets vie for the most coconuts.\n            <br/>\n            Each player will control a fleet.\n        </div>\n        <img src={require('./images/two_ships.png')} alt=\"ships\" className=\"icon\"/>\n    </div>,\n\n    <div className=\"tutorial-step\">\n        <div className=\"tutorial-text\">\n            The board starts with the sea routes (black lines) that existed immediately after the mutinies.\n            New routes will be built from these initial routes.\n        </div>\n        <img src={require('./images/board_0.png')} alt=\"coconuts\" className=\"icon\"/>\n    </div>,\n\n    <div className=\"tutorial-step\">\n        <div className=\"tutorial-text\">\n            Players take turns dragging a tile from the offer to the board.\n            At least one sea route on the new tile must connect to an existing sea route.\n        </div>\n        <div className=\"illustration\">\n            <div className=\"image turns\"/>\n        </div>\n    </div>,\n\n    <div className=\"tutorial-step\">\n        <div className=\"tutorial-text\">\n            The number of coconuts on the route determines the value of the route.\n            <br/>\n        </div>\n        <div className=\"illustration\">\n            <div className=\"image coconuts\"/>\n            <div className=\"caption\">1 single and 2 double coconuts for 3 total coconuts</div>\n        </div>\n\n    </div>,\n\n    <div className=\"tutorial-step\">\n        <div className=\"tutorial-text\">\n            A chest doubles the number of coconuts on the route.\n            <br/>\n            Multiple chests on the route have the same effect as a single chest.\n        </div>\n        <div className=\"illustration\">\n            <div className=\"image chest\"/>\n            <div className=\"caption\">The chest makes these 3 coconuts count as 6 coconuts</div>\n        </div>\n    </div>,\n\n\n    <div className=\"tutorial-step\">\n        <div className=\"tutorial-text\">\n            The player with the most ships on a route owns the coconuts on that route.\n            If players tie, neither player owns the coconuts for the route.\n            As players vie for control, the score will change.\n        </div>\n        <div className=\"illustration\">\n            <div className=\"image route\"/>\n            <div className=\"caption\">2 red ships and 3 blue ships means blue controls all of the coconuts on this route</div>\n        </div>\n\n    </div>,\n\n    <div className=\"tutorial-step\">\n        <div className=\"tutorial-text\">\n            An anchor at the end of a route doubles the ships of that color on the route. Two anchors of the same color on the route have the same effect as a single anchor.\n        </div>\n        <div className=\"illustration\">\n            <div className=\"image anchor\"/>\n            <div className=\"caption\">The red anchor makes the 2 red ships count as 4 ships, so red owns all of the coconuts on this route.</div>\n        </div>\n    </div>,\n\n    <div className=\"tutorial-step\">\n        <div className=\"tutorial-text\">\n            The game ends once all tiles have been placed.\n            <br/>\n            The player that owns the most coconuts at the end of the game wins!\n        </div>\n        <img src={require('./images/coconuts.png')} alt=\"coconuts\" className=\"icon\"/>\n    </div>,\n];\n\nfunction PreviousButton(props) {\n    if(props.currentRule !== 1) {\n        return (\n            <button className=\"navigation-button prev-button\" onClick={props.handlePrevious}>&lt;</button>\n        )\n    }\n    return <button disabled className=\"navigation-button prev-button\">&lt;</button>;\n}\n\n// TODO how to consolidate Prev active/disabled?\n\nfunction NextButton(props) {\n    if(props.currentRule < rules.length) {\n        return (\n            <button className=\"navigation-button next-button\" onClick={props.handleNext}>&gt;</button>\n        )\n    }\n    return <button disabled className=\"navigation-button next-button\">&gt;</button>;\n}\n\nfunction Tutorial(props) {\n    const totalSteps = rules.length;\n    const [currentRule, setCurrentRule] = useState(1);\n\n    const handlePrevious = () => {\n        let newRule =  currentRule - 1;\n        setCurrentRule(newRule);\n    };\n\n    const handleNext = () => {\n        let newRule =  currentRule + 1;\n        setCurrentRule(newRule);\n    };\n\n    return (\n        <Modal>\n            <div className=\"modal\">\n                <div className=\"tutorial\">\n                        <PreviousButton\n                            currentRule={currentRule}\n                            handlePrevious={handlePrevious}\n                        />\n                    {rules[currentRule-1]}\n                        <button className=\"exit-button\" onClick={props.handleHide}>&#10005;</button>\n                        <NextButton\n                            currentRule={currentRule}\n                            handleNext={handleNext}\n                        />\n                </div>\n            </div>\n        </Modal>\n    );\n}\n\nexport default Tutorial;\n","import React, {useState, useEffect} from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {DragDropContainer, DropTarget} from 'react-drag-drop-container';\nimport {tiles, BoardRoute} from './tiles.js'\nimport Tutorial from './rules.js';\nimport './rules.css';\n\n\n// todo items\n// SVG tiles???\n// if screen is above certain height, move tiles and buttons/score below?\n// images are slow. Make smaller? Cache?\n// For rules animations, can I overlay the new part instead of the whole image? Would be multiple background images with transparency.\n// Enable keyboard navigation for rules?\n// Enable keyboard navigation for tiles?\n// force landscape mode?\n// Tooltip for buttons. What is tooltip alternative for mobile?\n// Space the offer to match board height\n// art-make the routes more level at the edges so connections are smoother\n// art- make sure things aren't too close to L/R\n// lock in place? Or center to mouse?\n// resolve errors/warnings in console\n// TESTS!\n// check color accessibility\n// how to not duplicate modal.js between monkeys and stars?\n// would be so cool to change color of route to indicate owner\n// make rules swipable on mobile\n\nexport function shuffleArray(array) {\n    // Swap each value in an array, starting at the end of the array, with a position equal or earlier in the array.\n    for (let index = array.length - 1; index > 0; index--) {\n\n        // Get a random index from 0 to the current index of the array\n        // So for an array of length 3, the first round will be 0, 1, or 2, second round 0 or 1, and last round 0\n        // The values at this index and the current index will be swapped\n        let swapIndex = Math.floor(Math.random() * (index + 1));\n\n        // If the current index and index to swap are the same, move on to the next loop iteration\n        if (index === swapIndex) {\n            continue;\n        }\n\n        // Get the original value at index,\n        // set the value at the index to be the value at the swap index,\n        // then set the value at the swap index to be the original value at the index\n        let swapValue = array[index];\n        array[index] = array[swapIndex];\n        array[swapIndex] = swapValue;\n    }\n}\n\nexport function getBoardNodesFromRowCol(row, column, numColumns) {\n    // Convert a 0-indexed row/column to 0-indexed corner numbers of that row/column square in a grid\n    let topLeft = (row * (numColumns + 1) + column);\n    let topRight = topLeft + 1;\n    let bottomLeft = topLeft + numColumns + 1;\n    let bottomRight = bottomLeft + 1;\n    return [topLeft, topRight, bottomLeft, bottomRight]\n}\n\nfunction updateRoutes(boardRoutes, tile, row, column, numColumns) {\n\n    // Convert the row/col where the tile was placed to numbers describing the corner positions (\"nodes\") of the tile\n    let boardNodes = getBoardNodesFromRowCol(row, column, numColumns);\n\n    // For each route on the placed tile:\n    for (let tileRoute of tile.routes) {\n        console.log('Tile route: ', tileRoute.tileHead, tileRoute.tileTail);\n\n        // Convert the tile head/tail (0, 1, 2, 3, or null) to the corresponding board node\n        let convertedTileHead = typeof (tileRoute.tileHead) === \"number\" ? boardNodes[tileRoute.tileHead] : null;\n        let convertedTileTail = typeof (tileRoute.tileTail) === \"number\" ? boardNodes[tileRoute.tileTail] : null;\n        console.log('converted nodes: ', convertedTileHead, convertedTileTail);\n\n        //\n        // Find if there is an existing board route that matches the tile route head/tail\n        // There will be max 1 route match for head and tail each\n        //\n        let headMatch = null;\n        let tailMatch = null;\n\n        for (let boardRoute of boardRoutes) {\n            // If there is a head on the tile route\n            // and we haven't found a head match\n            // and the board route head or tail position matches the position of the tile route head\n            // record the board route as the head match\n            if (convertedTileHead\n                && !headMatch\n                && (boardRoute.boardHead === convertedTileHead || boardRoute.boardTail === convertedTileHead)) {\n                headMatch = boardRoute\n            }\n\n            // If there is a tail on the tile route\n            // and we haven't found a tail match\n            // and the board route head or tail position matches the position of the tile route tail\n            // record the board route as the tail match\n            if (convertedTileTail\n                && !tailMatch\n                && (boardRoute.boardHead === convertedTileTail || boardRoute.boardTail === convertedTileTail)) {\n                tailMatch = boardRoute\n            }\n\n            // If all possible matches have been found, exit.\n            // (There will be a max 1 route matching the head and 1 matching the tail.)\n            if (\n                (headMatch || !convertedTileHead)\n                && (tailMatch || !convertedTileTail)\n            ) {\n                break;\n            }\n        }\n\n        // If no match was found for the tile route head or tail,\n        // add the tile route as a new board route\n        if (!headMatch && !tailMatch) {\n            console.log('New route: ');\n            let newRoute = new BoardRoute({\n                boardHead: convertedTileHead,\n                boardTail: convertedTileTail,\n                tileRoutes: [tileRoute]\n            });\n            boardRoutes.push(newRoute);\n        }\n\n        // If only a head or tail (but not both) match was found,\n        // update the matching board route head/tail with the head/tail non-match\n        // and update the board route members\n        else if ((headMatch && !tailMatch) || (tailMatch && !headMatch)) {\n            console.log('Append route: ');\n\n            // Get the matching board route\n            let matchingRoute = headMatch ? headMatch : tailMatch;\n            console.log(\"appending to: \", matchingRoute, matchingRoute.boardHead, matchingRoute.boardTail, matchingRoute.tileRoutes.slice());\n\n            // If the board route matched at the head of the tile route,\n            // the tile tail will replace the board route head or tail\n            // Otherwise, the tile head will replace the board route head or tail\n            let newValue = headMatch ? convertedTileTail : convertedTileHead;\n\n            // Find the node where the board route joins the tile route\n            let matchingValue = headMatch ? convertedTileHead : convertedTileTail;\n\n            // Update the board route head or tail (whichever joins to the new tile) to be the new value\n            matchingRoute.boardHead === matchingValue ?\n                matchingRoute.boardHead = newValue :\n                matchingRoute.boardTail = newValue;\n\n            // Add the new tile to the route\n            matchingRoute.tileRoutes.push(tileRoute);\n            console.log(\"post append: \", matchingRoute, matchingRoute.boardHead, matchingRoute.boardTail, matchingRoute.tileRoutes.slice());\n\n        }\n\n        // If head and tail match the same board route, the route is now a loop.\n        // Set the route head/tail to null\n        // and update the board route members\n        else if (headMatch === tailMatch) {\n            console.log('Loop: ');\n            console.log(\"looping to: \", headMatch, headMatch.boardHead, headMatch.boardTail, headMatch.tileRoutes.slice());\n\n            headMatch.boardHead = null;\n            headMatch.boardTail = null;\n            headMatch.tileRoutes.push(tileRoute);\n            console.log(\"post loop: \", headMatch, headMatch.boardHead, headMatch.boardTail, headMatch.tileRoutes.slice());\n\n        }\n\n        // Otherwise, head and tail match different routes; the routes are now joined.\n        // Update head/tail on one route,\n        // add the new tile and the tiles from the other route to the updated route,\n        // delete the other route\n        else {\n            console.log('Join: ');\n\n            // For both matching board routes, set the terminus that doesn't connect to the new tile to be the new head/tail\n            let newHead = ((headMatch.boardHead === convertedTileHead) || (headMatch.boardHead === convertedTileTail)) ?\n                headMatch.boardTail :\n                headMatch.boardHead;\n            let newTail = ((tailMatch.boardHead === convertedTileHead) || (tailMatch.boardHead === convertedTileTail)) ?\n                tailMatch.boardTail :\n                tailMatch.boardHead;\n\n            // Arbitrarily keep the \"head route\" as the base route\n\n            console.log(\"join 1: \", headMatch, headMatch.boardHead, headMatch.boardTail, headMatch.tileRoutes.slice());\n            console.log(\"join 2: \", tailMatch, tailMatch.boardHead, tailMatch.boardTail, tailMatch.tileRoutes.slice());\n\n\n            // Update the head and tail\n            headMatch.boardHead = newHead;\n            headMatch.boardTail = newTail;\n\n            // Update the tiles in the route\n            headMatch.tileRoutes = headMatch.tileRoutes.concat(tailMatch.tileRoutes);\n            headMatch.tileRoutes.push(tileRoute);\n\n            // Delete the other board route\n            let indexToDelete = boardRoutes.indexOf(tailMatch);\n            boardRoutes.splice(indexToDelete, 1);\n\n            console.log(\"post join: \", headMatch, headMatch.boardHead, headMatch.boardTail, headMatch.tileRoutes.slice());\n\n        }\n    }\n    return boardRoutes\n}\n\nexport function tallyScore(routes) {\n    let newRedScore = 0;\n    let newBlueScore = 0;\n    for (let route of routes) {\n        let score = route.score;\n        newRedScore += score.red;\n        newBlueScore += score.blue;\n    }\n    return {red: newRedScore, blue: newBlueScore}\n}\n\nconst getInitialSetup = (numRows, numColumns) => {\n\n    // Shuffle the tiles\n    const pool = tiles.slice();\n    shuffleArray(pool);\n\n    // Draw 3 tiles for the starting offer\n    let startingOffer = pool.splice(0, 3);\n\n    // Draw 4 tiles for the starting board\n    let initialTiles = pool.splice(0, 4);\n\n    // Make the starting board\n    let starting_column = Math.round(numColumns / 2) - 1;\n    console.log(starting_column);\n    let startingPositions = [\n        {row: 1, column: starting_column},\n        {row: 3, column: starting_column},\n        {row: 5, column: starting_column},\n        {row: 7, column: starting_column}];\n    let startingBoard = Array.from({length: numRows}, e => Array(numColumns).fill(null));\n    initialTiles.forEach((tile, index) => {\n        let startingPosition = startingPositions[index];\n        startingBoard[startingPosition.row][startingPosition.column] = tile\n    });\n\n    // Calculate the routes present on the starting tiles\n    // (Right now, each route on the tile will be a unique route; don't need to worry about the tiles connecting)\n    let startingRoutes = [];\n    initialTiles.forEach((tile, index) => {\n        // Convert the row/col where the tile was placed to board node numbers\n        let startingPosition = startingPositions[index];\n        let boardNodes = getBoardNodesFromRowCol(startingPosition.row, startingPosition.column, numColumns);\n\n        // For each route on the tile, convert the tile-relative head/tail to board-relative head/tail\n        // and add the route to the starting routes\n        for (let route of tile.routes) {\n            let head = boardNodes[route.tileHead];\n            let tail = boardNodes[route.tileTail];\n            let boardRoute = new BoardRoute({boardHead: head, boardTail: tail, tileRoutes: [route]});\n            startingRoutes.push(boardRoute);\n        }\n    });\n\n    let startingScore = tallyScore(startingRoutes);\n\n    return ([pool, startingOffer, startingBoard, startingRoutes, startingScore])\n};\n\n\nfunction Game() {\n\n    let numRows = 9;\n    let numColumns = 7;\n    let [initialPool, startingOffer, startingBoard, startingRoutes, startingScore] = [[], [], [], [], []];\n\n    // The box shadow around the draw stack\n    let startingDrawEffect = [\n        \"-1px 1px rgba(27, 211, 235, 0.35)\",\n        \"-1px 1px rgba(0,0,0, 0.15)\",\n        \"-2px 2px rgba(27, 211, 235, 0.35)\",\n        \"-2px 2px rgba(0,0,0, 0.05)\",\n        \"-3px 3px rgba(27, 211, 235, 0.35)\",\n        \"-3px 3px rgba(0,0,0, 0.35)\",\n        \"-4px 4px rgba(27, 211, 235, 0.35)\",\n        \"-4px 4px rgba(0,0,0, 0.25)\",\n        \"-5px 5px rgba(27, 211, 235, 0.35)\",\n        \"-5px 5px rgba(0,0,0, 0.45)\",\n        \"-6px 6px rgba(27, 211, 235, 0.35)\",\n        \"-6px 6px rgba(0,0,0, 0.35)\",\n        \"-7px 7px rgba(27, 211, 235, 0.35)\",\n        \"-7px 7px rgba(0,0,0, 0.15)\",\n        \"-8px 8px rgba(27, 211, 235, 0.35)\",\n        \"-8px 8px rgba(0,0,0, 0.25)\",\n        \"-9px 9px rgba(27, 211, 235, 0.35)\",\n        \"-9px 9px rgba(0,0,0, 0.35)\",\n        \"-10px 10px rgba(27, 211, 235, 0.35)\",\n        \"-10px 10px rgba(0,0,0, 0.45)\",\n        \"-11px 11px rgba(27, 211, 235, 0.35)\",\n        \"-11px 11px rgba(0,0,0, 0.35)\",\n        \"-12px 12px rgba(27, 211, 235, 0.35)\",\n        \"-12px 12px rgba(0,0,0, 0.15)\",\n        \"-13px 13px rgba(27, 211, 235, 0.35)\",\n        \"-13px 13px rgba(0,0,0, 0.35)\",\n    ];\n\n    const [newGameRequested, setNewGameRequested] = useState(true);  // todo can I find a better way to do this?\n    const [offer, setOffer] = useState(startingOffer);\n    const [pool, setPool] = useState(initialPool);\n    const [played, setPlayed] = useState(startingBoard);\n    const [routes, setRoutes] = useState(startingRoutes);\n    const [showRules, setShowRules] = useState(false);\n    const [score, setScore] = useState(startingScore);\n    const [drawEffect, setDrawEffect] = useState(startingDrawEffect);\n    useEffect(() => {\n        let body = document.getElementsByTagName(\"body\")[0];\n        body.style.setProperty(\"--deck-size\", drawEffect.join(\",\"));\n    });\n\n    if (newGameRequested) {\n        setNewGameRequested(false);\n        [initialPool, startingOffer, startingBoard, startingRoutes, startingScore] = getInitialSetup(numRows, numColumns);\n        setPool(initialPool);\n        setOffer(startingOffer);\n        setPlayed(startingBoard);\n        setRoutes(startingRoutes);\n        setScore(startingScore);\n        setDrawEffect(startingDrawEffect);\n    }\n\n    const drawTile = () => {\n        // Take a tile from the pool. Update the pool and return the tile.\n        let newPool = pool.slice();\n        let tile = newPool.pop();\n        setPool(newPool);\n\n        // Update draw stack visual\n        drawEffect.splice(-2, 2);\n        setDrawEffect(drawEffect);\n        console.log(drawEffect.length);\n\n        return tile\n    };\n\n    const handleDrop = (e) => {\n        const row = e.dropData.row;\n        const column = e.dropData.column;\n        let tile = e.dragData.tile;\n        let squares = played.slice();\n\n        // If the square or the overlapping one above/below is already occupied,\n        // don't allow a tile to be dropped there\n        if (\n            squares[row][column]\n            || (squares[row + 1] && squares[row + 1][column])\n            || (squares[row - 1] && squares[row - 1][column])\n        ) {\n            return;\n        }\n\n        // If the square does not touch a tile to the left or right, don't allow the drop\n        if (\n            !(\n                squares[row][column + 1]\n                || squares[row][column - 1]\n                || (squares[row + 1] && squares[row + 1][column + 1])\n                || (squares[row + 1] && squares[row + 1][column - 1])\n                || (squares[row - 1] && squares[row - 1][column + 1])\n                || (squares[row - 1] && squares[row - 1][column - 1])\n            )\n        ) {\n            return;\n        }\n\n        // Put a token in the square where the token was dropped\n        squares[row][column] = tile;\n\n        // Update squares\n        setPlayed(squares);\n\n        // update routes\n        let oldRoutes = routes.slice();\n        let newRoutes = updateRoutes(oldRoutes, tile, row, column, numColumns);\n        setRoutes(newRoutes);\n\n        // Update score\n        let newScore = tallyScore(newRoutes);\n        setScore(newScore);\n\n        // Replenish offer\n        let newTile = drawTile();\n        let offerIndex = e.dragData.offerIndex;\n        let newOffer = offer.slice();\n        newOffer[offerIndex] = newTile;\n        setOffer(newOffer);\n    };\n\n    const handleNewGame = () => {\n        setNewGameRequested(true);\n    };\n\n    const handleShow = () => {\n        setShowRules(true);\n    };\n\n    const handleHide = () => {\n        setShowRules(false);\n    };\n\n    function Square(props) {\n        let tile = props.tile;\n        let className = tile ? \"square filled tile\" + tile.id : \"square\";\n\n        return (\n            <div className={className}\n                 onDragOver={props.onDragOver}\n                 onDrop={props.onDrop}\n            />\n        );\n    }\n\n    function Board() {\n\n        function renderTile(row, column) {\n            let squares = played.slice();\n            const tile = squares[row][column];\n            return (\n                <DropTarget\n                    targetKey=\"offer-tile\"\n                    dropData={{'row': row, 'column': column}}\n                    key={row + ',' + column}\n                >\n                    <Square\n                        tile={tile}\n                        key={row + ',' + column}\n                        row={row}\n                        column={column}\n                    />\n                </DropTarget>\n            );\n        }\n\n        function createBoard() {\n\n            let rows = [];\n            for (let rowIndex = 0; rowIndex < numRows; rowIndex++) {\n                let row = [];\n                for (let columnIndex = 0; columnIndex < numColumns; columnIndex++) {\n                    row.push(renderTile(rowIndex, columnIndex));\n                }\n                rows.push(<div className=\"board-row\" key={rowIndex}>{row}</div>);\n            }\n            return rows;\n        }\n\n        return (\n            <div className=\"board\">\n                {createBoard()}\n            </div>\n        );\n    }\n\n    function Offer() {\n\n        function renderOfferTile(offerIndex) {\n\n            const currentOffer = offer.slice();\n            const tile = currentOffer[offerIndex];\n            let className = tile ? \"square filled tile\" + tile.id + \" offer-tile\" : \"square offer-tile\";\n            return (\n                <DragDropContainer\n                    targetKey=\"offer-tile\"\n                    dragData={{tile: tile, offerIndex: offerIndex}}\n                    onDrop={(e) => handleDrop(e)}\n                    key={offerIndex}\n                >\n                    <div className={className}\n                    >\n                    </div>\n                </DragDropContainer>\n            );\n        }\n\n        function createOffer() {\n\n            let numOffers = 3;\n            let offer = [];\n            for (let offerIndex = 0; offerIndex < numOffers; offerIndex++) {\n                offer.push(renderOfferTile(offerIndex));\n            }\n            return offer;\n        }\n\n        return (\n            <div className=\"offer\">\n                {createOffer()}\n            </div>\n        );\n    }\n\n    let tutorial = showRules ?\n        <Tutorial handleHide={handleHide}/> :\n        null;\n\n    return (\n        <div className=\"game\">\n            <div className=\"offer-area\">\n                <Offer/>\n                <div className=\"square filled draw-pile\">\n                    {Math.max(0, pool.length)}\n                </div>\n            </div>\n            <Board/>\n            <div className=\"off-board\">\n                <div className=\"score\">\n                    <div className=\"red-score\">\n                        <div className=\"score-icon red\"/>\n                        {score.red}\n                    </div>\n                    <div className=\"blue-score\">\n                        <div className=\"score-icon blue\"/>\n                        {score.blue}\n                    </div>\n                </div>\n                <button className=\"new-game-button\" onClick={handleNewGame}></button>\n                <button className=\"rules-button\" onClick={handleShow}></button>\n                {/*<div className=\"temp\"/>*/}\n            </div>\n            {tutorial}\n        </div>\n    );\n}\n\n// ========================================\n\n// ReactDOM.render(<Game />, document.getElementById(\"root\")); todo\nReactDOM.render(\n    (<Game/>),\n    document.getElementById('root') || document.createElement('div') // for testing purposes\n);\n"],"sourceRoot":""}