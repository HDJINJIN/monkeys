(this.webpackJsonpmonkeys=this.webpackJsonpmonkeys||[]).push([[0],{12:function(e,t,a){e.exports=a(19)},17:function(e,t,a){},18:function(e,t,a){e.exports=a.p+"static/media/two_ships.846e2372.png"},19:function(e,t,a){"use strict";a.r(t),a.d(t,"shuffleArray",(function(){return S})),a.d(t,"getBoardNodesFromFlatIndex",(function(){return O})),a.d(t,"updateRoutes",(function(){return k})),a.d(t,"getInitialSetup",(function(){return j}));var n=a(7),l=a(1),r=a(3),i=a(0),o=a.n(i),s=a(10),c=a.n(s),u=(a(17),a(11)),d=a(6),m=function e(t){var a=t.tileHead,n=void 0===a?null:a,l=t.tileTail,r=void 0===l?null:l,i=t.coconuts,o=void 0===i?0:i,s=t.chests,c=void 0===s?0:s,u=t.redShips,m=void 0===u?0:u,h=t.blueShips,b=void 0===h?0:h,p=t.redAnchors,f=void 0===p?0:p,v=t.blueAnchors,g=void 0===v?0:v;Object(d.a)(this,e),this.tileHead=n,this.tileTail=r,this.coconuts=o,this.chests=c,this.redShips=m,this.blueShips=b,this.redAnchors=f,this.blueAnchors=g},h=function e(t){var a=t.routes;Object(d.a)(this,e),this.routes=a},b=function(){function e(t){var a=t.boardHead,n=void 0===a?null:a,l=t.boardTail,r=void 0===l?null:l,i=t.tileRoutes,o=void 0===i?[]:i;Object(d.a)(this,e),this.boardHead=n,this.boardTail=r,this.tileRoutes=o}return Object(u.a)(e,[{key:"calcScore",value:function(){var e,t=0,a=0,n=0,l=0,i=0,o=0,s=Object(r.a)(this.tileRoutes);try{for(s.s();!(e=s.n()).done;){var c=e.value;t+=c.coconuts,a+=c.chests,n+=c.redShips,l+=c.blueShips,i+=c.redAnchors,o+=c.blueAnchors}}catch(h){s.e(h)}finally{s.f()}var u=a?2*t:t,d=i?2*n:n,m=o?2*l:l;return m>d?{red:0,blue:u}:d>m?{red:u,blue:0}:{red:0,blue:0}}},{key:"score",get:function(){return this.calcScore()}}]),e}();var p=function(){var e=[new h({routes:[new m({tileHead:0,tileTail:2,coconuts:1}),new m({tileHead:1,tileTail:3,coconuts:1})]}),new h({routes:[new m({tileHead:0,tileTail:null,blueShips:1}),new m({tileHead:1,tileTail:2,coconuts:1,redShips:1}),new m({tileHead:3,tileTail:null,blueAnchors:1})]}),new h({routes:[new m({tileHead:0,tileTail:1,chests:1}),new m({tileHead:2,tileTail:3,blueShips:2})]}),new h({routes:[new m({tileHead:0,tileTail:null,coconuts:1}),new m({tileHead:2,tileTail:null,blueAnchors:1}),new m({tileHead:1,tileTail:3,redShips:1})]}),new h({routes:[new m({tileHead:0,tileTail:null,coconuts:1}),new m({tileHead:1,tileTail:2,redShips:1}),new m({tileHead:3,tileTail:null,coconuts:2})]}),new h({routes:[new m({tileHead:0,tileTail:1,coconuts:2}),new m({tileHead:null,tileTail:2,redShips:1}),new m({tileHead:3,tileTail:null,blueShips:1})]}),new h({routes:[new m({tileHead:0,tileTail:2,redShips:1}),new m({tileHead:1,tileTail:null,coconuts:1}),new m({tileHead:3,tileTail:null,redShips:1})]}),new h({routes:[new m({tileHead:0,tileTail:3,blueShips:1}),new m({tileHead:1,tileTail:2,redShips:1})]}),new h({routes:[new m({tileHead:0,tileTail:3,blueShips:1,coconuts:1}),new m({tileHead:null,tileTail:2,redAnchors:1}),new m({tileHead:1,tileTail:null,redShips:1})]}),new h({routes:[new m({tileHead:0,tileTail:null,redShips:1}),new m({tileHead:1,tileTail:null,redAnchors:1}),new m({tileHead:2,tileTail:3,coconuts:1,chests:1})]}),new h({routes:[new m({tileHead:0,blueAnchors:1}),new m({tileHead:1,blueShips:1}),new m({tileHead:2,tileTail:3,redShips:1,coconuts:1})]}),new h({routes:[new m({tileHead:0,tileTail:3,redShips:2}),new m({tileHead:1,blueAnchors:1}),new m({tileHead:2,coconuts:1})]}),new h({routes:[new m({tileHead:0,tileTail:3,redShips:1}),new m({tileHead:1,tileTail:2,coconuts:2})]}),new h({routes:[new m({tileHead:0,tileTail:2,blueShips:1}),new m({tileHead:1,coconuts:1}),new m({tileHead:3,redAnchors:1})]}),new h({routes:[new m({tileHead:0,tileTail:1,coconuts:2}),new m({tileHead:2,tileTail:3,chests:1})]}),new h({routes:[new m({tileHead:0,coconuts:2}),new m({tileHead:1,tileTail:2,blueShips:1}),new m({tileHead:3,coconuts:1})]}),new h({routes:[new m({tileHead:0,coconuts:1}),new m({tileHead:2,blueShips:1}),new m({tileHead:1,tileTail:3,blueShips:1})]}),new h({routes:[new m({tileHead:0,tileTail:3,coconuts:2}),new m({tileHead:1,tileTail:2,blueShips:1})]}),new h({routes:[new m({tileHead:0,redAnchors:1}),new m({tileHead:1,tileTail:2,blueShips:2}),new m({tileHead:3,coconuts:1})]}),new h({routes:[new m({tileHead:0,tileTail:1,chests:1}),new m({tileHead:2,tileTail:3,redShips:2})]})],t={};return e.forEach((function(e,a){return t[a]=e})),t}(),f=a(5);function v(e){var t=e.offerIndex,a=e.remainingTileIDs[t],n=a?"square filled tile"+a+" offer-tile":"square offer-tile";return o.a.createElement("div",{className:n,draggable:"true",onDragStart:function(e){return function(e,t,a){e.dataTransfer.setData("offerIndex",t),e.dataTransfer.setData("tile",a),e.target.style.opacity="0.5",/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||e.dataTransfer.setDragImage(e.target,50,50)}(e,t,a)},onDragEnd:function(e){e.target.style.opacity="1"}})}function g(e){var t=e.remainingTileIDs;return o.a.createElement("div",{id:"offer-area"},o.a.createElement("div",{id:"offer"},o.a.createElement(v,{offerIndex:"0",remainingTileIDs:t}),o.a.createElement(v,{offerIndex:"1",remainingTileIDs:t}),o.a.createElement(v,{offerIndex:"2",remainingTileIDs:t})),o.a.createElement("div",{className:"square filled draw-pile"},Math.max(0,t.length-3)))}function E(e){var t=e.played,a=e.handleDrop,n=t.map((function(e,t){var n=e?"square filled tile"+e:"square";return o.a.createElement("div",{onDrop:function(e){return a(e,t)},key:t,className:n,onDragEnter:function(e){e.preventDefault(),e.target.style["background-color"]="darkblue"},onDragLeave:function(e){e.target.style["background-color"]="transparent"},onDragOver:function(e){e.preventDefault()}})}));return o.a.createElement("div",{id:"board"},n)}function w(e){var t=function(e){var t=e.map((function(e){return e.score}));return{red:t.map((function(e){return e.red})).reduce((function(e,t,a,n){return e+t}),0),blue:t.map((function(e){return e.blue})).reduce((function(e,t,a,n){return e+t}),0)}}(e.routes);return o.a.createElement("div",{className:"score"},o.a.createElement("div",{className:"red-score"},o.a.createElement("div",{className:"score-icon red"}),t.red),o.a.createElement("div",{className:"blue-score"},o.a.createElement("div",{className:"score-icon blue"}),t.blue))}Object(f.polyfill)({dragImageCenterOnTouch:!0}),Object(f.polyfill)({dragImageCenterOnTouch:!0});var T=[o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},o.a.createElement("h1",null,"Monkeys of the Caribbean"),o.a.createElement("br",null),o.a.createElement("br",null),"2 Players",o.a.createElement("br",null),"15 Minutes",o.a.createElement("br",null),o.a.createElement("br",null),"Game by Colin Thom",o.a.createElement("br",null),"Built by Sarah Edwards"),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image monkey"})),o.a.createElement("div",{className:"tutorial-text"},"Version 2.1.0")),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"A crew of monkeys\u2014with you as the captain\u2014overthrew their pirate overlords. But it is not gold you want. Nay, coconuts are the bounty you seek.",o.a.createElement("br",null),o.a.createElement("br",null),"Alas! There be limited space on the sea. Compete for control of sea routes to get the most coconuts."),o.a.createElement("img",{src:a(9),alt:"coconuts",className:"icon"})),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"Two competing monkey pirate fleets vie for the most coconuts.",o.a.createElement("br",null),"Each player will control a fleet."),o.a.createElement("img",{src:a(18),alt:"ships",className:"icon"})),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"The board starts with the sea routes (black lines) that existed immediately after the mutinies. New routes will be built from these initial routes."),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image starting"}))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"Players take turns dragging a tile from the offer to the board. At least one sea route on the new tile must connect to an existing sea route."),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image turns"}))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"The number of coconuts on the route determines the value of the route.",o.a.createElement("br",null)),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image coconuts"}),o.a.createElement("div",{className:"caption"},"1 single and 2 double coconuts for 3 total coconuts"))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"A chest doubles the number of coconuts on the route.",o.a.createElement("br",null),"Multiple chests on the route have the same effect as a single chest."),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image chest"}),o.a.createElement("div",{className:"caption"},"The chest makes these 3 coconuts count as 6 coconuts"))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"The player with the most ships on a route owns the coconuts on that route. If players tie, neither player owns the coconuts for the route. As players vie for control, the score will change."),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image route"}),o.a.createElement("div",{className:"caption"},"2 red ships and 3 blue ships means blue controls all of the coconuts on this route"))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"An anchor at the end of a route doubles the ships of that color on the route. Two anchors of the same color on the route have the same effect as a single anchor."),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image anchor"}),o.a.createElement("div",{className:"caption"},"The red anchor makes the 2 red ships count as 4 ships, so red owns all of the coconuts on this route."))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"The game ends once all tiles have been placed.",o.a.createElement("br",null),"The player that owns the most coconuts at the end of the game wins!"),o.a.createElement("img",{src:a(9),alt:"coconuts",className:"icon"}))];function x(e){var t=e.currentRule,a=e.setCurrentRule;if(1!==t){return o.a.createElement("button",{className:"navigation-button prev-button",onClick:function(){a(t-1)}},"<")}return o.a.createElement("button",{disabled:!0,className:"navigation-button prev-button"},"<")}function H(e){var t=e.currentRule,a=e.setCurrentRule;if(t<T.length){return o.a.createElement("button",{className:"navigation-button next-button",onClick:function(){a(t+1)}},">")}return o.a.createElement("button",{disabled:!0,className:"navigation-button next-button"},">")}function N(e){var t=e.showRules,a=e.setShowRules,n=Object(i.useState)(1),r=Object(l.a)(n,2),s=r[0],c=r[1];if(t){return o.a.createElement("div",{className:"modal"},o.a.createElement("div",{id:"tutorial"},o.a.createElement(x,{currentRule:s,setCurrentRule:c}),T[s-1],o.a.createElement("button",{id:"exit-button",onClick:function(){c(1),a(!1)}},"\u2715"),o.a.createElement(H,{currentRule:s,setCurrentRule:c})))}return o.a.createElement("button",{id:"rules-button",onClick:function(){a(!0)}})}function y(e){var t=e.remainingTileIDs,a=e.routes;return t.every((function(e){return null===e}))?o.a.createElement("div",{id:"game-over",className:"modal",onClick:function(e){return function(e){e.target.style.display="none"}(e)}},o.a.createElement("div",null,"GAME OVER!"),o.a.createElement(w,{routes:a}),o.a.createElement("div",null,"Click anywhere to return.")):o.a.createElement(o.a.Fragment,null)}function S(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1));if(t!==a){var n=e[t];e[t]=e[a],e[a]=n}}}function O(e,t){var a=Math.floor(e/t),n=a*(t+1)+(e-a*t),l=n+t+1;return[n,n+1,l,l+1]}function k(e,t,a,n){var l,i=O(a,n),o=Object(r.a)(t.routes);try{for(o.s();!(l=o.n()).done;){var s,c=l.value,u="number"===typeof c.tileHead?i[c.tileHead]:null,d="number"===typeof c.tileTail?i[c.tileTail]:null,m=null,h=null,p=Object(r.a)(e);try{for(p.s();!(s=p.n()).done;){var f=s.value;if(!u||m||f.boardHead!==u&&f.boardTail!==u||(m=f),!d||h||f.boardHead!==d&&f.boardTail!==d||(h=f),(m||!u)&&(h||!d))break}}catch(N){p.e(N)}finally{p.f()}if(m||h)if(m&&!h||h&&!m){var v=m||h,g=m?d:u,E=m?u:d;v.boardHead===E?v.boardHead=g:v.boardTail=g,v.tileRoutes.push(c)}else if(m===h)m.boardHead=null,m.boardTail=null,m.tileRoutes.push(c);else{var w=m.boardHead===u||m.boardHead===d?m.boardTail:m.boardHead,T=h.boardHead===u||h.boardHead===d?h.boardTail:h.boardHead;m.boardHead=w,m.boardTail=T,m.tileRoutes=m.tileRoutes.concat(h.tileRoutes),m.tileRoutes.push(c);var x=e.indexOf(h);e.splice(x,1)}else{var H=new b({boardHead:u,boardTail:d,tileRoutes:[c]});e.push(H)}}}catch(N){o.e(N)}finally{o.f()}return e}function j(e,t){var a=Object.keys(p);S(a);var n=a.splice(0,4),l=[10,24,38,52],i=Array(t*e).fill(null);n.forEach((function(e,t){i[l[t]]=e}));var o=[];return n.forEach((function(e,a){var n,i=O(l[a],t),s=Object(r.a)(p[e].routes);try{for(s.s();!(n=s.n()).done;){var c=n.value,u=i[c.tileHead],d=i[c.tileTail],m=new b({boardHead:u,boardTail:d,tileRoutes:[c]});o.push(m)}}catch(h){s.e(h)}finally{s.f()}})),[a,i,o]}function A(){var e=j(9,7),t=Object(l.a)(e,3),a=t[0],r=t[1],s=t[2],c=["-1px 1px rgba(27, 211, 235, 0.35)","-1px 1px rgba(0,0,0, 0.15)","-2px 2px rgba(27, 211, 235, 0.35)","-2px 2px rgba(0,0,0, 0.05)","-3px 3px rgba(27, 211, 235, 0.35)","-3px 3px rgba(0,0,0, 0.35)","-4px 4px rgba(27, 211, 235, 0.35)","-4px 4px rgba(0,0,0, 0.25)","-5px 5px rgba(27, 211, 235, 0.35)","-5px 5px rgba(0,0,0, 0.45)","-6px 6px rgba(27, 211, 235, 0.35)","-6px 6px rgba(0,0,0, 0.35)","-7px 7px rgba(27, 211, 235, 0.35)","-7px 7px rgba(0,0,0, 0.15)","-8px 8px rgba(27, 211, 235, 0.35)","-8px 8px rgba(0,0,0, 0.25)","-9px 9px rgba(27, 211, 235, 0.35)","-9px 9px rgba(0,0,0, 0.35)","-10px 10px rgba(27, 211, 235, 0.35)","-10px 10px rgba(0,0,0, 0.45)","-11px 11px rgba(27, 211, 235, 0.35)","-11px 11px rgba(0,0,0, 0.35)","-12px 12px rgba(27, 211, 235, 0.35)","-12px 12px rgba(0,0,0, 0.15)","-13px 13px rgba(27, 211, 235, 0.35)","-13px 13px rgba(0,0,0, 0.35)"],u=Object(i.useState)(a),d=Object(l.a)(u,2),m=d[0],h=d[1],b=Object(i.useState)(r),f=Object(l.a)(b,2),v=f[0],T=f[1],x=Object(i.useState)(s),H=Object(l.a)(x,2),S=H[0],O=H[1],A=Object(i.useState)(!1),R=Object(l.a)(A,2),D=R[0],I=R[1];Object(i.useEffect)((function(){var e=c.slice(0,2*(m.length-3));document.getElementsByTagName("body")[0].style.setProperty("--deck-size",e.join(","))}));return o.a.createElement("div",{id:"game"},o.a.createElement(g,{remainingTileIDs:m}),o.a.createElement(E,{played:v,handleDrop:function(e,t){e.target.style["background-color"]="transparent";var a=e.dataTransfer.getData("offerIndex"),l=e.dataTransfer.getData("tile"),r=Object(n.a)(v);if(function(e,t,a){var n=function(e,t){for(var a=[],n=0;n<e.length;n+=t)a[a.length]=e.slice(n,n+t);return a}(e,a),l=Math.floor(t/a),r=t-l*a;return!(n[l][r]||n[l+1]&&n[l+1][r]||n[l-1]&&n[l-1][r])&&!!(n[l][r+1]||n[l][r-1]||n[l+1]&&n[l+1][r+1]||n[l+1]&&n[l+1][r-1]||n[l-1]&&n[l-1][r+1]||n[l-1]&&n[l-1][r-1])}(r,t,7)){r[t]=l,T(r);var i=k(S.slice(),p[l],t,7);O(i);var o=Object(n.a)(m);o.length>3?(o[a]=o[o.length-1],o.splice(-1,1)):o[a]=null,h(o)}}}),o.a.createElement("div",{id:"off-board"},o.a.createElement(w,{routes:S}),o.a.createElement("button",{id:"new-game-button",onClick:function(){var e=j(9,7),t=Object(l.a)(e,3),a=t[0],n=t[1],r=t[2];h(a),T(n),O(r)}}),o.a.createElement(N,{showRules:D,setShowRules:I}),o.a.createElement(y,{remainingTileIDs:m,routes:S})))}c.a.render(o.a.createElement(A,null),document.getElementById("root")||document.createElement("div"))},9:function(e,t,a){e.exports=a.p+"static/media/coconuts.1ae6fa30.png"}},[[12,1,2]]]);
//# sourceMappingURL=main.fc5a0eab.chunk.js.map