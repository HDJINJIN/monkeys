(this.webpackJsonpmonkeys=this.webpackJsonpmonkeys||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/coconuts.1ae6fa30.png"},,,function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/two_ships.846e2372.png"},function(e,t,a){"use strict";a.r(t),a.d(t,"shuffleArray",(function(){return k})),a.d(t,"getBoardNodesFromFlatIndex",(function(){return D})),a.d(t,"updateRoutes",(function(){return R})),a.d(t,"getInitialSetup",(function(){return A}));var l=a(9),n=a(1),r=a(3),i=a(0),o=a.n(i),s=a(6),c=a.n(s),u=(a(19),a(7)),d=a(4),m=function e(t){var a=t.tileHead,l=void 0===a?null:a,n=t.tileTail,r=void 0===n?null:n,i=t.coconuts,o=void 0===i?0:i,s=t.chests,c=void 0===s?0:s,u=t.redShips,m=void 0===u?0:u,h=t.blueShips,p=void 0===h?0:h,b=t.redAnchors,f=void 0===b?0:b,v=t.blueAnchors,w=void 0===v?0:v;Object(d.a)(this,e),this.tileHead=l,this.tileTail=r,this.coconuts=o,this.chests=c,this.redShips=m,this.blueShips=p,this.redAnchors=f,this.blueAnchors=w},h=function e(t){var a=t.routes;Object(d.a)(this,e),this.routes=a},p=function(){function e(t){var a=t.boardHead,l=void 0===a?null:a,n=t.boardTail,r=void 0===n?null:n,i=t.tileRoutes,o=void 0===i?[]:i;Object(d.a)(this,e),this.boardHead=l,this.boardTail=r,this.tileRoutes=o}return Object(u.a)(e,[{key:"calcScore",value:function(){var e,t=0,a=0,l=0,n=0,i=0,o=0,s=Object(r.a)(this.tileRoutes);try{for(s.s();!(e=s.n()).done;){var c=e.value;t+=c.coconuts,a+=c.chests,l+=c.redShips,n+=c.blueShips,i+=c.redAnchors,o+=c.blueAnchors}}catch(h){s.e(h)}finally{s.f()}var u=a?2*t:t,d=i?2*l:l,m=o?2*n:n;return m>d?{red:0,blue:u}:d>m?{red:u,blue:0}:{red:0,blue:0}}},{key:"score",get:function(){return this.calcScore()}}]),e}();var b=function(){var e=[new h({routes:[new m({tileHead:0,tileTail:2,coconuts:1}),new m({tileHead:1,tileTail:3,coconuts:1})]}),new h({routes:[new m({tileHead:0,tileTail:null,blueShips:1}),new m({tileHead:1,tileTail:2,coconuts:1,redShips:1}),new m({tileHead:3,tileTail:null,blueAnchors:1})]}),new h({routes:[new m({tileHead:0,tileTail:1,chests:1}),new m({tileHead:2,tileTail:3,blueShips:2})]}),new h({routes:[new m({tileHead:0,tileTail:null,coconuts:1}),new m({tileHead:2,tileTail:null,blueAnchors:1}),new m({tileHead:1,tileTail:3,redShips:1})]}),new h({routes:[new m({tileHead:0,tileTail:null,coconuts:1}),new m({tileHead:1,tileTail:2,redShips:1}),new m({tileHead:3,tileTail:null,coconuts:2})]}),new h({routes:[new m({tileHead:0,tileTail:1,coconuts:2}),new m({tileHead:null,tileTail:2,redShips:1}),new m({tileHead:3,tileTail:null,blueShips:1})]}),new h({routes:[new m({tileHead:0,tileTail:2,redShips:1}),new m({tileHead:1,tileTail:null,coconuts:1}),new m({tileHead:3,tileTail:null,redShips:1})]}),new h({routes:[new m({tileHead:0,tileTail:3,blueShips:1}),new m({tileHead:1,tileTail:2,redShips:1})]}),new h({routes:[new m({tileHead:0,tileTail:3,blueShips:1,coconuts:1}),new m({tileHead:null,tileTail:2,redAnchors:1}),new m({tileHead:1,tileTail:null,redShips:1})]}),new h({routes:[new m({tileHead:0,tileTail:null,redShips:1}),new m({tileHead:1,tileTail:null,redAnchors:1}),new m({tileHead:2,tileTail:3,coconuts:1,chests:1})]}),new h({routes:[new m({tileHead:0,blueAnchors:1}),new m({tileHead:1,blueShips:1}),new m({tileHead:2,tileTail:3,redShips:1,coconuts:1})]}),new h({routes:[new m({tileHead:0,tileTail:3,redShips:2}),new m({tileHead:1,blueAnchors:1}),new m({tileHead:2,coconuts:1})]}),new h({routes:[new m({tileHead:0,tileTail:3,redShips:1}),new m({tileHead:1,tileTail:2,coconuts:2})]}),new h({routes:[new m({tileHead:0,tileTail:2,blueShips:1}),new m({tileHead:1,coconuts:1}),new m({tileHead:3,redAnchors:1})]}),new h({routes:[new m({tileHead:0,tileTail:1,coconuts:2}),new m({tileHead:2,tileTail:3,chests:1})]}),new h({routes:[new m({tileHead:0,coconuts:2}),new m({tileHead:1,tileTail:2,blueShips:1}),new m({tileHead:3,coconuts:1})]}),new h({routes:[new m({tileHead:0,coconuts:1}),new m({tileHead:2,blueShips:1}),new m({tileHead:1,tileTail:3,blueShips:1})]}),new h({routes:[new m({tileHead:0,tileTail:3,coconuts:2}),new m({tileHead:1,tileTail:2,blueShips:1})]}),new h({routes:[new m({tileHead:0,redAnchors:1}),new m({tileHead:1,tileTail:2,blueShips:2}),new m({tileHead:3,coconuts:1})]}),new h({routes:[new m({tileHead:0,tileTail:1,chests:1}),new m({tileHead:2,tileTail:3,redShips:2})]})],t={};return e.forEach((function(e,a){return t[a]=e})),t}(),f=(a(20),a(8));function v(e){var t=e.offerIndex,a=e.remainingTileIDs,l=(e.handleDrop,a[t]),n=l?"square filled tile"+l+" offer-tile":"square offer-tile";return o.a.createElement("div",{className:n,draggable:"true",onDragStart:function(e){return function(e,t,a){e.dataTransfer.setData("offerIndex",t),e.dataTransfer.setData("tile",a)}(e,t,l)}})}function w(e){var t=e.remainingTileIDs,a=e.handleDrop;return o.a.createElement("div",{className:"offer-area"},o.a.createElement("div",{className:"offer"},o.a.createElement(v,{offerIndex:"0",remainingTileIDs:t,handleDrop:a}),o.a.createElement(v,{offerIndex:"1",remainingTileIDs:t,handleDrop:a}),o.a.createElement(v,{offerIndex:"2",remainingTileIDs:t,handleDrop:a})),o.a.createElement("div",{className:"square filled draw-pile"},Math.max(0,t.length-3)))}function g(e){var t=e.played,a=e.handleDrop,l=t.map((function(e,t){var l=e?"square filled tile"+e:"square";return o.a.createElement("div",{onDrop:function(e){return a(e,t)},key:t,className:l+" droptarget",onDragEnter:function(e){e.preventDefault(),e.target.style["background-color"]="darkblue"},onDragLeave:function(e){e.target.style["background-color"]="transparent"},onDragOver:function(e){e.preventDefault()}})}));return o.a.createElement("div",{className:"board"},l)}function E(e){var t=function(e){var t=e.map((function(e){return e.score}));return{red:t.map((function(e){return e.red})).reduce((function(e,t,a,l){return e+t}),0),blue:t.map((function(e){return e.blue})).reduce((function(e,t,a,l){return e+t}),0)}}(e.routes);return o.a.createElement("div",{className:"score"},o.a.createElement("div",{className:"red-score"},o.a.createElement("div",{className:"score-icon red"}),t.red),o.a.createElement("div",{className:"blue-score"},o.a.createElement("div",{className:"score-icon blue"}),t.blue))}Object(f.polyfill)({dragImageCenterOnTouch:!0}),Object(f.polyfill)({dragImageCenterOnTouch:!0});var T=a(13),x=a(12),H=document.getElementById("modal"),N=function(e){Object(T.a)(a,e);var t=Object(x.a)(a);function a(e){var l;return Object(d.a)(this,a),(l=t.call(this,e)).element=document.createElement("div"),l}return Object(u.a)(a,[{key:"componentDidMount",value:function(){H.appendChild(this.element)}},{key:"componentWillUnmount",value:function(){H.removeChild(this.element)}},{key:"render",value:function(){return Object(s.createPortal)(this.props.children,this.element)}}]),a}(o.a.Component),y=[o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},o.a.createElement("h1",null,"Monkeys of the Caribbean"),o.a.createElement("br",null),o.a.createElement("br",null),"2 Players",o.a.createElement("br",null),"15 Minutes",o.a.createElement("br",null),o.a.createElement("br",null),"Game by Colin Thom",o.a.createElement("br",null),"Built by Sarah Edwards"),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image monkey"}))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"A crew of monkeys\u2014with you as the captain\u2014overthrew their pirate overlords. But it is not gold you want. Nay, coconuts are the bounty you seek. Alas! There be limited space on the sea. Compete for control of sea routes to get the most coconuts."),o.a.createElement("img",{src:a(11),alt:"coconuts",className:"icon"})),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"Two competing monkey pirate fleets vie for the most coconuts.",o.a.createElement("br",null),"Each player will control a fleet."),o.a.createElement("img",{src:a(21),alt:"ships",className:"icon"})),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"The board starts with the sea routes (black lines) that existed immediately after the mutinies. New routes will be built from these initial routes."),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image starting"}))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"Players take turns dragging a tile from the offer to the board. At least one sea route on the new tile must connect to an existing sea route."),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image turns"}))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"The number of coconuts on the route determines the value of the route.",o.a.createElement("br",null)),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image coconuts"}),o.a.createElement("div",{className:"caption"},"1 single and 2 double coconuts for 3 total coconuts"))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"A chest doubles the number of coconuts on the route.",o.a.createElement("br",null),"Multiple chests on the route have the same effect as a single chest."),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image chest"}),o.a.createElement("div",{className:"caption"},"The chest makes these 3 coconuts count as 6 coconuts"))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"The player with the most ships on a route owns the coconuts on that route. If players tie, neither player owns the coconuts for the route. As players vie for control, the score will change."),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image route"}),o.a.createElement("div",{className:"caption"},"2 red ships and 3 blue ships means blue controls all of the coconuts on this route"))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"An anchor at the end of a route doubles the ships of that color on the route. Two anchors of the same color on the route have the same effect as a single anchor."),o.a.createElement("div",{className:"illustration"},o.a.createElement("div",{className:"image anchor"}),o.a.createElement("div",{className:"caption"},"The red anchor makes the 2 red ships count as 4 ships, so red owns all of the coconuts on this route."))),o.a.createElement("div",{className:"tutorial-step"},o.a.createElement("div",{className:"tutorial-text"},"The game ends once all tiles have been placed.",o.a.createElement("br",null),"The player that owns the most coconuts at the end of the game wins!"),o.a.createElement("img",{src:a(11),alt:"coconuts",className:"icon"}))];function S(e){var t=e.currentRule,a=e.setCurrentRule;if(1!==t){return o.a.createElement("button",{className:"navigation-button prev-button",onClick:function(){a(t-1)}},"<")}return o.a.createElement("button",{disabled:!0,className:"navigation-button prev-button"},"<")}function O(e){var t=e.currentRule,a=e.setCurrentRule;if(t<y.length){return o.a.createElement("button",{className:"navigation-button next-button",onClick:function(){a(t+1)}},">")}return o.a.createElement("button",{disabled:!0,className:"navigation-button next-button"},">")}function j(e){var t=e.showRules,a=e.setShowRules,l=Object(i.useState)(1),r=Object(n.a)(l,2),s=r[0],c=r[1];if(t){return o.a.createElement(N,null,o.a.createElement("div",{className:"modal"},o.a.createElement("div",{className:"tutorial"},o.a.createElement(S,{currentRule:s,setCurrentRule:c}),y[s-1],o.a.createElement("button",{className:"exit-button",onClick:function(){c(1),a(!1)}},"\u2715"),o.a.createElement(O,{currentRule:s,setCurrentRule:c}))))}return o.a.createElement("button",{className:"rules-button",onClick:function(){a(!0)}})}function k(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1));if(t!==a){var l=e[t];e[t]=e[a],e[a]=l}}}function D(e,t){var a=Math.floor(e/t),l=a*(t+1)+(e-a*t),n=l+t+1;return[l,l+1,n,n+1]}function R(e,t,a,l){var n,i=D(a,l),o=Object(r.a)(t.routes);try{for(o.s();!(n=o.n()).done;){var s,c=n.value,u="number"===typeof c.tileHead?i[c.tileHead]:null,d="number"===typeof c.tileTail?i[c.tileTail]:null,m=null,h=null,b=Object(r.a)(e);try{for(b.s();!(s=b.n()).done;){var f=s.value;if(!u||m||f.boardHead!==u&&f.boardTail!==u||(m=f),!d||h||f.boardHead!==d&&f.boardTail!==d||(h=f),(m||!u)&&(h||!d))break}}catch(N){b.e(N)}finally{b.f()}if(m||h)if(m&&!h||h&&!m){var v=m||h,w=m?d:u,g=m?u:d;v.boardHead===g?v.boardHead=w:v.boardTail=w,v.tileRoutes.push(c)}else if(m===h)m.boardHead=null,m.boardTail=null,m.tileRoutes.push(c);else{var E=m.boardHead===u||m.boardHead===d?m.boardTail:m.boardHead,T=h.boardHead===u||h.boardHead===d?h.boardTail:h.boardHead;m.boardHead=E,m.boardTail=T,m.tileRoutes=m.tileRoutes.concat(h.tileRoutes),m.tileRoutes.push(c);var x=e.indexOf(h);e.splice(x,1)}else{var H=new p({boardHead:u,boardTail:d,tileRoutes:[c]});e.push(H)}}}catch(N){o.e(N)}finally{o.f()}return e}function A(e,t){var a=Object.keys(b),l=a.splice(0,4),n=[10,24,38,52],i=Array(t*e).fill(null);l.forEach((function(e,t){i[n[t]]=e}));var o=[];return l.forEach((function(e,a){var l,i=D(n[a],t),s=Object(r.a)(b[e].routes);try{for(s.s();!(l=s.n()).done;){var c=l.value,u=i[c.tileHead],d=i[c.tileTail],m=new p({boardHead:u,boardTail:d,tileRoutes:[c]});o.push(m)}}catch(h){s.e(h)}finally{s.f()}})),[a,i,o]}function I(){var e=A(9,7),t=Object(n.a)(e,3),a=t[0],r=t[1],s=t[2],c=["-1px 1px rgba(27, 211, 235, 0.35)","-1px 1px rgba(0,0,0, 0.15)","-2px 2px rgba(27, 211, 235, 0.35)","-2px 2px rgba(0,0,0, 0.05)","-3px 3px rgba(27, 211, 235, 0.35)","-3px 3px rgba(0,0,0, 0.35)","-4px 4px rgba(27, 211, 235, 0.35)","-4px 4px rgba(0,0,0, 0.25)","-5px 5px rgba(27, 211, 235, 0.35)","-5px 5px rgba(0,0,0, 0.45)","-6px 6px rgba(27, 211, 235, 0.35)","-6px 6px rgba(0,0,0, 0.35)","-7px 7px rgba(27, 211, 235, 0.35)","-7px 7px rgba(0,0,0, 0.15)","-8px 8px rgba(27, 211, 235, 0.35)","-8px 8px rgba(0,0,0, 0.25)","-9px 9px rgba(27, 211, 235, 0.35)","-9px 9px rgba(0,0,0, 0.35)","-10px 10px rgba(27, 211, 235, 0.35)","-10px 10px rgba(0,0,0, 0.45)","-11px 11px rgba(27, 211, 235, 0.35)","-11px 11px rgba(0,0,0, 0.35)","-12px 12px rgba(27, 211, 235, 0.35)","-12px 12px rgba(0,0,0, 0.15)","-13px 13px rgba(27, 211, 235, 0.35)","-13px 13px rgba(0,0,0, 0.35)"],u=Object(i.useState)(a),d=Object(n.a)(u,2),m=d[0],h=d[1],p=Object(i.useState)(r),f=Object(n.a)(p,2),v=f[0],T=f[1],x=Object(i.useState)(s),H=Object(n.a)(x,2),N=H[0],y=H[1],S=Object(i.useState)(!1),O=Object(n.a)(S,2),k=O[0],D=O[1];Object(i.useEffect)((function(){var e=c.slice(0,2*(m.length-3));document.getElementsByTagName("body")[0].style.setProperty("--deck-size",e.join(","))}));var I=function(e,t){e.target.style["background-color"]="transparent";var a=e.dataTransfer.getData("offerIndex"),n=e.dataTransfer.getData("tile"),r=Object(l.a)(v);if(function(e,t,a){var l=function(e,t){for(var a=[],l=0;l<e.length;l+=t)a[a.length]=e.slice(l,l+t);return a}(e,a),n=Math.floor(t/a),r=t-n*a;return!(l[n][r]||l[n+1]&&l[n+1][r]||l[n-1]&&l[n-1][r])&&!!(l[n][r+1]||l[n][r-1]||l[n+1]&&l[n+1][r+1]||l[n+1]&&l[n+1][r-1]||l[n-1]&&l[n-1][r+1]||l[n-1]&&l[n-1][r-1])}(r,t,7)){r[t]=n,T(r);var i=R(N.slice(),b[n],t,7);y(i);var o=Object(l.a)(m);o.length>3?(o[a]=o[o.length-1],o.splice(-1,1)):o[a]=null,h(o)}};return o.a.createElement("div",{className:"game"},o.a.createElement(w,{remainingTileIDs:m,handleDrop:I}),o.a.createElement(g,{played:v,handleDrop:I}),o.a.createElement("div",{className:"off-board"},o.a.createElement(E,{routes:N}),o.a.createElement(j,{showRules:k,setShowRules:D})))}c.a.render(o.a.createElement(I,null),document.getElementById("root")||document.createElement("div"))}],[[14,1,2]]]);
//# sourceMappingURL=main.772d2cf9.chunk.js.map